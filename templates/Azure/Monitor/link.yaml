parameters:
  - name: subscription
    type: string
  - name: resourceGroupName
    type: string
  - name: appName
    type: string
  - name: appPrefix
    type: string
  - name: businessArea
    type: string
  - name: builtFrom
    type: string
  - name: environment
    type: string
  - name: logAnalyticsResourceGroup
    type: string
  - name: logAnalyticsSubscriptionId
    type: string

steps:
  - task: AzurePowerShell@5
    inputs:
      azureSubscription: ${{ parameters.subscription }}
      ScriptType: 'FilePath'
      ScriptPath: '$(build.sourcesdirectory)/templates/Azure/Monitor/link.ps1'
      ScriptArguments: '-businessArea ${{ parameters.businessArea }} -builtFrom ${{ parameters.builtFrom }} -environment ${{ parameters.environment }} -logAnalyticsResourceGroup ${{ parameters.logAnalyticsResourceGroup }} -logAnalyticsSubscriptionId ${{ parameters.logAnalyticsSubscriptionId }}  -appName ${{ parameters.appName }}  -appPrefix ${{ parameters.appPrefix }}  -resourceGroupName ${{ parameters.resourceGroupName }}  -subscriptionName ${{ parameters.subscription }}'
      azurePowerShellVersion: 'LatestVersion'
